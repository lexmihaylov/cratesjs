<script charset="utf-8">!function(e,t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():"Polymer"in e?e.Polymer.Crates=r():e.Crates=r()}(this,0,function(){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!==o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r});var e=function(e,t,r){if(!r)return e[t];e[t]=r},t=function(){var t=function(e){this._payload=e,this._observers={}};return t.prototype.set=function(t,r,n){void 0!==n&&null!==n||(n=!0),e(this._payload,t,this.ensureImmutable(r)),n&&this.dispatch(t,r)},t.prototype.get=function(t){return e(this._payload,t)},t.prototype.ensureImmutable=function(e){return e instanceof Array?e=[].concat(e):e instanceof Object&&(e=Object.assign({},e)),e},t.prototype.dispatch=function(e,t){try{this._observers[e].forEach(function(r){r.call(null,this.ensureImmutable(t),e)}.bind(this))}catch(e){console.warn(e)}},t.prototype.addObserver=function(e,t){return e in this._observers||(this._observers[e]=[]),this._observers[e].push(t),{path:e,handler:t}},t.prototype.removeObserver=function(e){try{this._observers[e.path].splice(this._observers.indexOf(e.handler),1),0===this._observers[e.path].length&&delete this._observers[e.path]}catch(e){}},t}(),r=function(){return{create:function(e,t){var r={observers:[],properties:t};return this.createPropertieObservers(r,t),this.createStoreSetterAndGetter(r),this.createAttachedMethod(r,e,t),this.createDetachedMethod(r),r},createStoreSetterAndGetter:function(e){e.notify=e.set=function(e,t){this._notifyStore=!1,this._crateStore.set(e,t),this._notifyStore=!0},e.get=function(e){return this._crateStore.get(e)}},createObserverMethod:function(e,t){return{name:"_"+e+"_observer",path:e}},createPropertieObservers:function(e,t){e._parseObserverValue=function(e){return e};for(var r in t)t.hasOwnProperty(r)&&function(t,r){var n=this.createObserverMethod(t,r);e.observers.push(n.name+"("+n.path+")"),e[n.name]=function(e){this._notifyObserver&&this._crateStore&&this.setStoreValue(t,this._parseObserverValue(e))}}.call(this,r,t[r].type)},createAttachedMethod:function(e,t,r){e._setObseverValue=function(e,t){var r="_set"+e.charAt(0).toUpperCase()+e.slice(1);this._notifyObserver=!1,r in this?this[r](t):this[e]=t,this._notifyObserver=!0},e.attached=function(){this._crateStore=t,this._crateStoreObservers=[],this._notifyObserver=!0,this._notifyStore=!0;for(var e in r)r.hasOwnProperty(e)&&function(e){var t=this._crateStore.addObserver(e,function(r){this._notifyStore&&(this._setObseverValue(e,r),this._crateStoreObservers.push(t))}.bind(this))}.call(this,e)}},createDetachedMethod:function(e){e.detached=function(){for(var e=0,t=this._crateStoreObservers.length;e<t;e++)this._crateStore.removeObserver(this._crateStoreObservers[e])}}}}(),n=function(e){return"type"in e||(e={type:e}),"notify"in e||(e.notify=!0),e};return{Crate:t,create:function(e){return new t(e)},createBehavior:function(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(e[o]=n(e[o]),t[o]="function"==typeof e[o].value?e[o].value():e[o].value||void 0);var s=this.create(t);return r.create(s,e)}}});</script>
